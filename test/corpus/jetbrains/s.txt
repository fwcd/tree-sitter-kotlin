==================
SemicolonAfterIf
==================

fun foo(a: Int): Int { var x = a; var y = x++; if (y+1 != x) return -1; return x; }

---

(source_file
  (function_declaration
    (simple_identifier)
    (function_value_parameters
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier))))
    (user_type
      (type_identifier))
    (function_body
      (statements
        (property_declaration
          (binding_pattern_kind)
          (variable_declaration
            (simple_identifier))
          (simple_identifier))
        (property_declaration
          (binding_pattern_kind)
          (variable_declaration
            (simple_identifier))
          (postfix_expression
            (simple_identifier)))
        (if_expression
          condition: (equality_expression
            (additive_expression
              (simple_identifier)
              (integer_literal))
            (simple_identifier))
          consequence: (control_structure_body
            (jump_expression
              (prefix_expression
                (integer_literal)))))
        (jump_expression
          (simple_identifier))))))

==================
SimpleClassMembers
==================

// COMPILATION_ERRORS

class foo {

    class foo {
        object foo {

        }

        class Bar {}

        fun foo()

        val x

        var f

        typealias foo = bar
    }

    class Bar {
        object foo {
            companion object {

            }

            private companion object {

            }

            private companion object : Fooo {

            }

            private companion object : Fooo, Bar by foo {

            }

            private companion object : Fooo, Bar by foo, Goo()
        }

        class Bar {}

        fun foo()

        val x

        var f

        typealias foo = bar
    }

    fun foo()

    val x

    var f

    typealias foo = bar

    companion object {

    }

    private companion object {

    }

    private companion object : Fooo {

    }

    private companion object : Fooo, Bar by foo {

    }

    private companion object : Fooo, Bar by foo, Goo()


}

---

(source_file
  (line_comment)
  (class_declaration
    (type_identifier)
    (class_body
      (class_declaration
        (type_identifier)
        (class_body
          (object_declaration
            (type_identifier)
            (class_body))
          (class_declaration
            (type_identifier)
            (class_body))
          (function_declaration
            (simple_identifier)
            (function_value_parameters))
          (property_declaration
            (binding_pattern_kind)
            (variable_declaration
              (simple_identifier)))
          (property_declaration
            (binding_pattern_kind)
            (variable_declaration
              (simple_identifier)))
          (type_alias
            (type_identifier)
            (user_type
              (type_identifier)))))
      (class_declaration
        (type_identifier)
        (class_body
          (object_declaration
            (type_identifier)
            (class_body
              (companion_object
                (class_body))
              (companion_object
                (modifiers
                  (visibility_modifier))
                (class_body))
              (companion_object
                (modifiers
                  (visibility_modifier))
                (delegation_specifier
                  (user_type
                    (type_identifier)))
                (class_body))
              (companion_object
                (modifiers
                  (visibility_modifier))
                (delegation_specifier
                  (user_type
                    (type_identifier)))
                (delegation_specifier
                  (explicit_delegation
                    (user_type
                      (type_identifier))
                    (call_expression
                      (simple_identifier)
                      (call_suffix
                        (annotated_lambda
                          (lambda_literal)))))))
              (companion_object
                (modifiers
                  (visibility_modifier))
                (delegation_specifier
                  (user_type
                    (type_identifier)))
                (delegation_specifier
                  (explicit_delegation
                    (user_type
                      (type_identifier))
                    (simple_identifier)))
                (delegation_specifier
                  (constructor_invocation
                    (user_type
                      (type_identifier))
                    (value_arguments))))))
          (class_declaration
            (type_identifier)
            (class_body))
          (function_declaration
            (simple_identifier)
            (function_value_parameters))
          (property_declaration
            (binding_pattern_kind)
            (variable_declaration
              (simple_identifier)))
          (property_declaration
            (binding_pattern_kind)
            (variable_declaration
              (simple_identifier)))
          (type_alias
            (type_identifier)
            (user_type
              (type_identifier)))))
      (function_declaration
        (simple_identifier)
        (function_value_parameters))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)))
      (type_alias
        (type_identifier)
        (user_type
          (type_identifier)))
      (companion_object
        (class_body))
      (companion_object
        (modifiers
          (visibility_modifier))
        (class_body))
      (companion_object
        (modifiers
          (visibility_modifier))
        (delegation_specifier
          (user_type
            (type_identifier)))
        (class_body))
      (companion_object
        (modifiers
          (visibility_modifier))
        (delegation_specifier
          (user_type
            (type_identifier)))
        (delegation_specifier
          (explicit_delegation
            (user_type
              (type_identifier))
            (call_expression
              (simple_identifier)
              (call_suffix
                (annotated_lambda
                  (lambda_literal)))))))
      (companion_object
        (modifiers
          (visibility_modifier))
        (delegation_specifier
          (user_type
            (type_identifier)))
        (delegation_specifier
          (explicit_delegation
            (user_type
              (type_identifier))
            (simple_identifier)))
        (delegation_specifier
          (constructor_invocation
            (user_type
              (type_identifier))
            (value_arguments)))))))

==================
SimpleExpressions
==================

// COMPILATION_ERRORS

fun a(
    a : foo = Unit,
    a : foo = 10,
    a : foo = 0x10,
    a : foo = '1',
    a : foo = "dsf",
    a : foo = """dsf""",
    a : foo = 10.0,
    a : foo = 10.dbl,
    a : foo = 10.flt,
    a : foo = 10.0.dbl,
    a : foo = 10.lng,
    a : foo = true,
    a : foo = false,
    a : foo = null,
    a : foo = this,
    a : foo = super<sdf>,
    a : foo = (10),
    a : foo = Triple(10, "A", 0xf),
    a : foo = Foo(bar),
    a : foo = Foo<A>(bar),
    a : foo = Foo(),
    a : foo = Foo<bar>(),
    a : foo = object : Foo{},
    a : foo = throw Foo(),
    a : foo = return 10,
    a : foo = break,
    a : foo = break@la,
    a : foo = continue,
    a : foo = continue@la,
    a : foo = 10,
    a : foo = 10,
    a : foo = 10,
    a : foo = 10,
    a : foo = 0xffffffff.lng
) {
    return 10
    return
    10
    break
    la@
    break@la
    continue
    la@
    continue@la
}

---

(source_file
  (line_comment)
  (function_declaration
    (simple_identifier)
    (function_value_parameters
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (simple_identifier)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (integer_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (hex_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (character_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (string_literal
        (string_content))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (string_literal
        (string_content))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (real_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (navigation_expression
        (integer_literal)
        (navigation_suffix
          (simple_identifier)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (navigation_expression
        (integer_literal)
        (navigation_suffix
          (simple_identifier)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (navigation_expression
        (real_literal)
        (navigation_suffix
          (simple_identifier)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (navigation_expression
        (integer_literal)
        (navigation_suffix
          (simple_identifier)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (boolean_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (boolean_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (null_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (this_expression)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (super_expression
        (user_type
          (type_identifier)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (parenthesized_expression
        (integer_literal))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (call_expression
        (simple_identifier)
        (call_suffix
          (value_arguments
            (value_argument
              (integer_literal))
            (value_argument
              (string_literal
                (string_content)))
            (value_argument
              (hex_literal)))))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (call_expression
        (simple_identifier)
        (call_suffix
          (value_arguments
            (value_argument
              (simple_identifier)))))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (call_expression
        (simple_identifier)
        (call_suffix
          (type_arguments
            (type_projection
              (user_type
                (type_identifier))))
          (value_arguments
            (value_argument
              (simple_identifier)))))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (call_expression
        (simple_identifier)
        (call_suffix
          (value_arguments)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (call_expression
        (simple_identifier)
        (call_suffix
          (type_arguments
            (type_projection
              (user_type
                (type_identifier))))
          (value_arguments)))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (object_literal
        (delegation_specifier
          (user_type
            (type_identifier)))
        (class_body))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (jump_expression
        (call_expression
          (simple_identifier)
          (call_suffix
            (value_arguments))))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (jump_expression
        (integer_literal))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (jump_expression)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (jump_expression
        (label))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (jump_expression)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (jump_expression
        (label))
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (integer_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (integer_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (integer_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (integer_literal)
      (parameter
        (simple_identifier)
        (user_type
          (type_identifier)))
      (navigation_expression
        (hex_literal)
        (navigation_suffix
          (simple_identifier))))
    (function_body
      (statements
        (jump_expression
          (integer_literal))
        (jump_expression)
        (integer_literal)
        (jump_expression)
        (prefix_expression
          (label)
          (jump_expression
            (label)))
        (jump_expression)
        (prefix_expression
          (label)
          (jump_expression
            (label)))))))

==================
Super
==================

// COMPILATION_ERRORS

// KT-156 Fix the this<Super> syntax
fun foo() {
    super.foo();
    super<Int>.foo();
    super<>.foo();
    super<Int>@label.foo();
}

---

(source_file
  (line_comment)
  (line_comment)
  (function_declaration
    (simple_identifier)
    (function_value_parameters)
    (function_body
      (statements
        (call_expression
          (navigation_expression
            (super_expression)
            (navigation_suffix
              (simple_identifier)))
          (call_suffix
            (value_arguments)))
        (call_expression
          (navigation_expression
            (super_expression
              (user_type
                (type_identifier)))
            (navigation_suffix
              (simple_identifier)))
          (call_suffix
            (value_arguments)))
        (call_expression
          (navigation_expression
            (super_expression
              (user_type
                (type_identifier
                  (MISSING _alpha_identifier))))
            (navigation_suffix
              (simple_identifier)))
          (call_suffix
            (value_arguments)))
        (call_expression
          (navigation_expression
            (super_expression
              (user_type
                (type_identifier))
              (type_identifier))
            (navigation_suffix
              (simple_identifier)))
          (call_suffix
            (value_arguments)))))))

==================
sealed
==================

package test

sealed class Sealed {
    class Nested: Sealed()
    object Top: Sealed()
}

---

(source_file
  (package_header
    (identifier
      (simple_identifier)))
  (class_declaration
    (modifiers
      (class_modifier))
    (type_identifier)
    (class_body
      (class_declaration
        (type_identifier)
        (delegation_specifier
          (constructor_invocation
            (user_type
              (type_identifier))
            (value_arguments))))
      (object_declaration
        (type_identifier)
        (delegation_specifier
          (constructor_invocation
            (user_type
              (type_identifier))
            (value_arguments)))))))

==================
sealedInterface
==================

// FIR_IDENTICAL
package test

sealed interface SealedInterface {
    class Nested : SealedInterface
    object Top : SealedInterface
}

---

(source_file
  (line_comment)
  (package_header
    (identifier
      (simple_identifier)))
  (class_declaration
    (modifiers
      (class_modifier))
    (type_identifier)
    (class_body
      (class_declaration
        (type_identifier)
        (delegation_specifier
          (user_type
            (type_identifier))))
      (object_declaration
        (type_identifier)
        (delegation_specifier
          (user_type
            (type_identifier)))))))

==================
specialNames
==================

object SpecialNames {
    val `1M` = 1
}

---

(source_file
  (object_declaration
    (type_identifier)
    (class_body
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier))
        (integer_literal)))))

==================
suspendLambda
==================

package test

class SuspendLambda {
    fun <T> (suspend () -> T).createCoroutine1(completion: Continuation<T>) {}

    fun <R, T> (suspend R.() -> T).createCoroutine2(receiver: R, completion: Continuation<T>) {}

    fun <R, T> (suspend @receiver:A R.() -> T).createCoroutineAnother() {}

    fun <T> testCoroutine(f: suspend (Int) -> T?) {}

    fun <T> testCoroutineWithAnnotation(f: suspend (Int) -> @A T?) {}

    var nullableSuspend: (suspend (P) -> Unit)? = null
    var nullableSuspendWithReceiver: (suspend RS.(P) -> Unit)? = null
    var nullableSuspendWithNullableParameter: (suspend (P?) -> Unit)? = null
    var nullableSuspendWithNullableReceiver: (suspend RS?.(P) -> Unit)? = null

    var nullableSuspendWithAnnotation: (@A() suspend (P) -> Unit)? = null

    fun override(p: String, b: (suspend (P) -> Unit)) = null
    fun override(b: (suspend (P) -> Unit)) = null

    fun annotatedReturnSuspend(): @A suspend (P) -> Unit = {}
    fun returnSuspend(): suspend (P) -> Unit = {}
}

interface P
interface RS

@Target(AnnotationTarget.TYPE, AnnotationTarget.VALUE_PARAMETER)
annotation class A

class Continuation<T> {}

---

(source_file
  (package_header
    (identifier
      (simple_identifier)))
  (class_declaration
    (type_identifier)
    (class_body
      (function_declaration
        (type_parameters
          (type_parameter
            (type_identifier)))
        receiver: (receiver_type
          (parenthesized_type
            (type_modifiers)
            (function_type
              (function_type_parameters)
              (user_type
                (type_identifier)))))
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (user_type
              (type_identifier)
              (type_arguments
                (type_projection
                  (user_type
                    (type_identifier)))))))
        (function_body))
      (function_declaration
        (type_parameters
          (type_parameter
            (type_identifier))
          (type_parameter
            (type_identifier)))
        receiver: (receiver_type
          (parenthesized_type
            (type_modifiers)
            (function_type
              receiver: (receiver_type
                (user_type
                  (type_identifier)))
              (function_type_parameters)
              (user_type
                (type_identifier)))))
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (user_type
              (type_identifier)))
          (parameter
            (simple_identifier)
            (user_type
              (type_identifier)
              (type_arguments
                (type_projection
                  (user_type
                    (type_identifier)))))))
        (function_body))
      (function_declaration
        (type_parameters
          (type_parameter
            (type_identifier))
          (type_parameter
            (type_identifier)))
        receiver: (receiver_type
          (parenthesized_type
            (type_modifiers)
            (function_type
              receiver: (receiver_type
                (type_modifiers
                  (annotation
                    (use_site_target)
                    (user_type
                      (type_identifier))))
                (user_type
                  (type_identifier)))
              (function_type_parameters)
              (user_type
                (type_identifier)))))
        (simple_identifier)
        (function_value_parameters)
        (function_body))
      (function_declaration
        (type_parameters
          (type_parameter
            (type_identifier)))
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (type_modifiers)
            (function_type
              (function_type_parameters
                (user_type
                  (type_identifier)))
              (nullable_type
                (user_type
                  (type_identifier))))))
        (function_body))
      (function_declaration
        (type_parameters
          (type_parameter
            (type_identifier)))
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (type_modifiers)
            (function_type
              (function_type_parameters
                (user_type
                  (type_identifier)))
              (type_modifiers
                (annotation
                  (user_type
                    (type_identifier))))
              (nullable_type
                (user_type
                  (type_identifier))))))
        (function_body))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)
          (nullable_type
            (parenthesized_type
              (type_modifiers)
              (function_type
                (function_type_parameters
                  (user_type
                    (type_identifier)))
                (user_type
                  (type_identifier))))))
        (null_literal))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)
          (nullable_type
            (parenthesized_type
              (type_modifiers)
              (function_type
                receiver: (receiver_type
                  (user_type
                    (type_identifier)))
                (function_type_parameters
                  (user_type
                    (type_identifier)))
                (user_type
                  (type_identifier))))))
        (null_literal))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)
          (nullable_type
            (parenthesized_type
              (type_modifiers)
              (function_type
                (function_type_parameters
                  (nullable_type
                    (user_type
                      (type_identifier))))
                (user_type
                  (type_identifier))))))
        (null_literal))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)
          (nullable_type
            (parenthesized_type
              (type_modifiers)
              (function_type
                receiver: (receiver_type
                  (nullable_type
                    (user_type
                      (type_identifier))))
                (function_type_parameters
                  (user_type
                    (type_identifier)))
                (user_type
                  (type_identifier))))))
        (null_literal))
      (property_declaration
        (binding_pattern_kind)
        (variable_declaration
          (simple_identifier)
          (nullable_type
            (parenthesized_type
              (type_modifiers
                (annotation
                  (constructor_invocation
                    (user_type
                      (type_identifier))
                    (value_arguments))))
              (function_type
                (function_type_parameters
                  (user_type
                    (type_identifier)))
                (user_type
                  (type_identifier))))))
        (null_literal))
      (function_declaration
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (user_type
              (type_identifier)))
          (parameter
            (simple_identifier)
            (parenthesized_type
              (type_modifiers)
              (function_type
                (function_type_parameters
                  (user_type
                    (type_identifier)))
                (user_type
                  (type_identifier))))))
        (function_body
          (null_literal)))
      (function_declaration
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (parenthesized_type
              (type_modifiers)
              (function_type
                (function_type_parameters
                  (user_type
                    (type_identifier)))
                (user_type
                  (type_identifier))))))
        (function_body
          (null_literal)))
      (function_declaration
        (simple_identifier)
        (function_value_parameters)
        (type_modifiers
          (annotation
            (user_type
              (type_identifier))))
        (function_type
          (function_type_parameters
            (user_type
              (type_identifier)))
          (user_type
            (type_identifier)))
        (function_body
          (lambda_literal)))
      (function_declaration
        (simple_identifier)
        (function_value_parameters)
        (type_modifiers)
        (function_type
          (function_type_parameters
            (user_type
              (type_identifier)))
          (user_type
            (type_identifier)))
        (function_body
          (lambda_literal)))))
  (class_declaration
    (type_identifier))
  (class_declaration
    (type_identifier))
  (class_declaration
    (modifiers
      (annotation
        (constructor_invocation
          (user_type
            (type_identifier))
          (value_arguments
            (value_argument
              (navigation_expression
                (simple_identifier)
                (navigation_suffix
                  (simple_identifier))))
            (value_argument
              (navigation_expression
                (simple_identifier)
                (navigation_suffix
                  (simple_identifier)))))))
      (class_modifier))
    (type_identifier))
  (class_declaration
    (type_identifier)
    (type_parameters
      (type_parameter
        (type_identifier)))
    (class_body)))

