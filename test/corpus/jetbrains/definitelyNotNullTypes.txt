==================
definitelyNotNullTypes
==================

class DefinitelyNotNullTypes<T>(private val x: T & Any) {
    fun foo(xs: List<T & Any>): T & Any {
        return if (xs.isNotEmpty()) xs[0] else x
    }

    fun <R> bar(x: R & Any, action: (R & Any) -> R & Any): R & Any {
        return action(x)
    }
}

---

(source_file
  (class_declaration
    (type_identifier)
    (type_parameters
      (type_parameter
        (type_identifier)))
    (primary_constructor
      (class_parameter
        (modifiers
          (visibility_modifier))
        (binding_pattern_kind)
        (simple_identifier)
        (not_nullable_type
          (user_type
            (type_identifier))
          (user_type
            (type_identifier)))))
    (class_body
      (function_declaration
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (user_type
              (type_identifier)
              (type_arguments
                (type_projection
                  (not_nullable_type
                    (user_type
                      (type_identifier))
                    (user_type
                      (type_identifier))))))))
        (not_nullable_type
          (user_type
            (type_identifier))
          (user_type
            (type_identifier)))
        (function_body
          (statements
            (jump_expression
              (if_expression
                condition: (call_expression
                  (navigation_expression
                    (simple_identifier)
                    (navigation_suffix
                      (simple_identifier)))
                  (call_suffix
                    (value_arguments)))
                consequence: (control_structure_body
                  (indexing_expression
                    (simple_identifier)
                    (indexing_suffix
                      (integer_literal))))
                alternative: (control_structure_body
                  (simple_identifier)))))))
      (function_declaration
        (type_parameters
          (type_parameter
            (type_identifier)))
        (simple_identifier)
        (function_value_parameters
          (parameter
            (simple_identifier)
            (not_nullable_type
              (user_type
                (type_identifier))
              (user_type
                (type_identifier))))
          (parameter
            (simple_identifier)
            (function_type
              (function_type_parameters
                (not_nullable_type
                  (user_type
                    (type_identifier))
                  (user_type
                    (type_identifier))))
              (not_nullable_type
                (user_type
                  (type_identifier))
                (user_type
                  (type_identifier))))))
        (not_nullable_type
          (user_type
            (type_identifier))
          (user_type
            (type_identifier)))
        (function_body
          (statements
            (jump_expression
              (call_expression
                (simple_identifier)
                (call_suffix
                  (value_arguments
                    (value_argument
                      (simple_identifier))))))))))))
